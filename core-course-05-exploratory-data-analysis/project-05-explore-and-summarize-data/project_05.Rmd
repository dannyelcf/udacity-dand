---
output: github_document
---
EDA in Issues Tracking Data Set
================================================================================
*by Dannyel Cardoso da Fonseca* 

```{r echo=FALSE, message=FALSE, warning=FALSE, "Load Packages"}
library(ggplot2)
library(dplyr)
library(lubridate)
```

```{r echo=FALSE, message=FALSE, warning=FALSE, "Set Up"}
# NOTE: To run this notebook set up current work directory to this file location

# To avoid Evaluation error: (converted from warning) unknown timezone 
# 'zone/tz/2017c.1.0/zoneinfo/America/Sao_Paulo'.
Sys.setenv(TZ = "America/Sao_Paulo")

# Set up default theme for plots
theme_set(theme_classic())
```

```{r echo=FALSE, "Load Data Set"}
# Load the Issues Tracking Data Set
setClass('date_ymd_hms')
setAs("character","date_ymd_hms", function(from) ymd_hms(from))
setClass('date_ymd')
setAs("character", "date_ymd", function(from) ymd(from))
setClass('time_period')
setAs("character", "time_period", function(from) seconds_to_period(from))
setClass('factor_issue_priority_scale')
setAs("character", "factor_issue_priority_scale", 
      function(from) {
        factor(from, levels = c("SUSPENDED",
                                "LOW",
                                "MEDIUM",
                                "HIGH",
                                "URGENT",
                                "BLOCKING"))
      })
issues <- read.csv("issues_tracking.csv", 
                   stringsAsFactors=FALSE, 
                   na.strings = "",
                   colClasses = c("integer", # issue_id
                                  "integer", # issue_number
                                  "character", # issue_title
                                  "factor", # issue_type
                                  "date_ymd_hms", # issue_creation_date
                                  "factor", # issue_system
                                  "date_ymd", # issue_start_date
                                  "factor", # issue_subsystem
                                  "date_ymd", # issue_deadline_date
                                  "character", # issue_created_by
                                  "factor", # issue_stakeholder
                                  "factor", # issue_status
                                  "time_period", # issue_time_spent
                                  "integer", # issue_priority_number
                                  "integer", # issue_progress
                                  "factor_issue_priority_scale",  # issue_priority_scale
                                  "character", # log_build_info
                                  "date_ymd_hms",  # log_creation_date
                                  "factor", # log_action
                                  "factor", # log_status
                                  "integer", # log_progress
                                  "time_period", # log_time_spent
                                  "character", # log_created_by 
                                  "integer" # log_svn_revision 
                                  ))
```

This project aims to explore a data set containing 22,125 observations of issues 
tracking and their history logs. The data set represents 5 years of project 
management which aimed maintenance and customization of many integrated systems.

A proprietary issue tracking system was used to manage activities of teams. I used 
data wrangling techniques to export data from that and clean them. 

The final data set, used in this project, and its documentation can be accessed, 
respectively, in these links: 

- [issues_tracking.csv](issues_tracking.csv)
- [issues_tracking.Rdoc.txt](issues_tracking.Rdoc.txt)

The exported data set, the wrangling process scripts and an example of one issue 
tracking can be find in [data_wrangling](data_wrangling) folder. 

# Summary of the Data Set

The issue data set contains 22,125 rows and 24 variables. Of these 24 variables 
16 are about issue data and 8 about history records of a given issue.

```{r echo=FALSE, message=FALSE, warning=FALSE, "Structure of the Data Set"}
str(issues, max.level=1, vec.len=1, nchar.max=50)
```

The relationship between issue and log is 1-N, that is, one issue can contains
zero or more logs. In this project, the data set is denormalized. The issue data 
and log data are joined in the same row. Thus, one issue with three history logs 
has three rows in data set. In *issue_\** columns the data are repeated and in 
*log_\** columns the data are distinct (one for each issue log). The issue 
*15617* illustrates this case in the table below.

```{r echo=FALSE, message=FALSE, warning=FALSE, "Head of the Data Set"}
issues %>% 
  select(issue_id, issue_creation_date, log_creation_date) %>% 
  arrange(issue_id, log_creation_date) %>%
  head(5)
```

# Univariate Plots Section

> **Tip**: In this section, you should perform some preliminary exploration of
your dataset. Run some summaries of the data and create univariate plots to
understand the structure of the individual variables in your dataset. Don't
forget to add a comment after each plot or closely-related group of plots!
There should be multiple code chunks and text sections; the first one below is
just to help you get started.

```{r echo=FALSE, fig.retina=2, Univariate_Plots}
issues %>% 
  count(issue_type) %>% 
  ggplot(aes(x = reorder(issue_type, -n), y = n/sum(n))) + 
    geom_bar(stat = "identity", alpha = .5) +
    geom_text(aes(label = n), vjust = -1) +
    scale_y_continuous(limits = c(0, 1), breaks = seq(0, 1, .1)) +
    labs(title = "Frequency of Issue Types",
         x = "issue_type",
         y = "frequency")

```
